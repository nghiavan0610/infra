# =============================================================================
# Garage S3-Compatible Storage - Environment Configuration
# =============================================================================
# Copy this file to .env and customize for your environment
# Generate secrets: openssl rand -hex 32 (for rpc_secret)
#                   openssl rand -base64 32 (for admin_token)
# =============================================================================

# -----------------------------------------------------------------------------
# Ports
# -----------------------------------------------------------------------------
GARAGE_S3_API_PORT=3900       # S3 API (main endpoint)
GARAGE_RPC_PORT=3901          # RPC (inter-node communication)
GARAGE_S3_WEB_PORT=3902       # Web serving (static sites)
GARAGE_ADMIN_PORT=3903        # Admin API + Metrics
GARAGE_K2V_PORT=3904          # K2V API (optional)

# -----------------------------------------------------------------------------
# Secrets (CHANGE THESE!)
# -----------------------------------------------------------------------------
# Generate with: openssl rand -hex 32
GARAGE_RPC_SECRET=change-me-generate-with-openssl-rand-hex-32

# Generate with: openssl rand -base64 32
GARAGE_ADMIN_TOKEN=change-me-generate-with-openssl-rand-base64-32
GARAGE_METRICS_TOKEN=change-me-generate-with-openssl-rand-base64-32

# -----------------------------------------------------------------------------
# Storage Configuration
# -----------------------------------------------------------------------------
# Replication factor (1 for single node, 3 for production cluster)
GARAGE_REPLICATION_FACTOR=1

# Data directory capacity (used for layout assignment)
GARAGE_CAPACITY=100G

# Zone name for this node
GARAGE_ZONE=dc1

# -----------------------------------------------------------------------------
# Performance Tuning
# -----------------------------------------------------------------------------
# Block size for data chunks (default: 1M, max: 10M)
# Larger = better for big files, smaller = better for small files
GARAGE_BLOCK_SIZE=1048576

# Compression level (0=none, 1=fast, 2=default, 3=best)
GARAGE_COMPRESSION_LEVEL=1

# Metadata cache size in bytes (default: 128MB)
GARAGE_SLED_CACHE_CAPACITY=134217728

# -----------------------------------------------------------------------------
# Web UI (Optional)
# -----------------------------------------------------------------------------
GARAGE_WEB_UI_PORT=3909
GARAGE_WEB_UI_USER=admin
GARAGE_WEB_UI_PASS=change-me-secure-password

# -----------------------------------------------------------------------------
# Network
# -----------------------------------------------------------------------------
# Public address for RPC (use container name in Docker)
GARAGE_RPC_PUBLIC_ADDR=garage:3901

# S3 region name
GARAGE_S3_REGION=garage

# Domain for S3 virtual-host style access (optional)
GARAGE_S3_ROOT_DOMAIN=.s3.garage.localhost
GARAGE_WEB_ROOT_DOMAIN=.web.garage.localhost

# -----------------------------------------------------------------------------
# CORS (adjust for your domains)
# -----------------------------------------------------------------------------
# Comma-separated list of allowed origins
GARAGE_CORS_ORIGINS=*

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
# Options: error, warn, info, debug, trace
RUST_LOG=garage=info

# -----------------------------------------------------------------------------
# Resource Limits
# -----------------------------------------------------------------------------
GARAGE_MEMORY_LIMIT=1g
GARAGE_CPU_LIMIT=2
