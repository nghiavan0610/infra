<?xml version="1.0"?>
<clickhouse>
    <!-- Force IPv4 only (IPv6 disabled on some hosts) -->
    <listen_host>0.0.0.0</listen_host>

    <!-- Logging -->
    <logger>
        <level>information</level>
        <console>1</console>
    </logger>

    <!-- Performance -->
    <max_concurrent_queries>100</max_concurrent_queries>
    <max_connections>4096</max_connections>

    <!-- HTTP settings -->
    <http_server_default_response><![CDATA[<html><body>ClickHouse HTTP Server</body></html>]]></http_server_default_response>

    <!-- Query log -->
    <query_log>
        <database>system</database>
        <table>query_log</table>
        <partition_by>toYYYYMM(event_date)</partition_by>
        <flush_interval_milliseconds>7500</flush_interval_milliseconds>
    </query_log>

    <!-- Metrics -->
    <prometheus>
        <endpoint>/metrics</endpoint>
        <port>9363</port>
        <metrics>true</metrics>
        <events>true</events>
        <asynchronous_metrics>true</asynchronous_metrics>
    </prometheus>
</clickhouse>
