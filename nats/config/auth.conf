# NATS Authentication Configuration Template
# This file is processed by envsubst to generate auth.conf

# Account Definitions
accounts {
    # System account for NATS management and monitoring
    SYS: {
        users: [
            {
                user: "sys"
                password: "sys_admin_9z7x4c2v1b8n5m3k"
            },
            # NATS Surveyor monitoring user
            {
                user: "monitoring-surveyor"
                password: "surveyor_m8k4x1n9c7v2b5h3"
                permissions = {
                    publish = ["$.REQ.>"]
                    subscribe = ["$.>"]
                }
            }
        ]
    }
    
    # Main application account with service-specific permissions
    BRANDMATE: {
        users: [
            # Teacher Service
            {
                user: "teacher-service-nats"
                password: "ts_7k9m2x5n8q1w4e6r"
                permissions = {
                    publish = [
                        "teacher.*",
                        "events.teacher.*",
                        "notifications.*"
                    ]
                    subscribe = [
                        "user.query.*",
                        "course.query.*", 
                        "events.user.*",
                        "events.course.*",
                        "_INBOX.*"
                    ]
                }
            },
            
            # User Service
            {
                user: "user-service-nats"
                password: "us_3p8j5h2f9v7c1x4z"
                permissions = {
                    publish = [
                        "user.*",
                        "events.user.*",
                        "notifications.*"
                    ]
                    subscribe = [
                        "teacher.query.*",
                        "course.query.*",
                        "events.teacher.*", 
                        "events.course.*",
                        "_INBOX.*"
                    ]
                }
            },

            # Class Service
            {
                user: "class-service-nats"
                password: "cs_0lmm20128q1pq011"
                permissions = {
                    publish = [
                        "class.*",
                        "events.class.*",
                        "notifications.*"
                    ]
                    subscribe = [
                        "teacher.query.*",
                        "course.query.*",
                        "events.teacher.*", 
                        "events.course.*",
                        "_INBOX.*"
                    ]
                }
            },

            # Search Service
            {
                user: "search-service-nats"
                password: "ss_alom2x5n8q1pq0k2"
                permissions = {
                    publish = []
                    subscribe = [
                        "events.user.*", 
                        "events.teacher.*", 
                        "events.course.*",
                        "_INBOX.*"
                    ]
                }
            },

            # Notification Service
            {
                user: "notification-service-nats"
                password: "ns_4b7g1k3m9x2c5v8n"
                permissions = {
                    publish = [
                        "notifications.email.*",
                        "notifications.sms.*",
                        "notifications.push.*"
                    ]
                    subscribe = [
                        "notifications.*",
                        "events.*"
                    ]
                }
            }
        ]
        
        # JetStream configuration for BRANDMATE account
        jetstream: {
            max_memory: 1GB
            max_store: 10GB
            max_streams: 100
            max_consumers: 1000
        }
    }

    MONEA: {
        users: [
            {
                user: "monea-nats"
                password: "monea_7k9m2x5n8q1w4e6r"
                permissions = {
                    publish = [
                        "teacher.*",
                        "events.teacher.*",
                        "notifications.*"
                    ]
                    subscribe = [
                        "user.query.*",
                        "course.query.*", 
                        "events.user.*",
                        "events.course.*",
                        "_INBOX.*"
                    ]
                }
            }
        ]
        
        # JetStream configuration for BRANDMATE account
        jetstream: {
            max_memory: 1GB
            max_store: 10GB
            max_streams: 100
            max_consumers: 1000
        }
    }
}

# System account for monitoring and management
system_account: "SYS"
