# NATS Server Configuration for Brandmate Microservices
# Optimized for performance and production readiness

# Network Configuration
host: "0.0.0.0"
port: 4222

# HTTP Monitoring
http_port: 8222

# Server Information
server_name: "brandmate-nats-1"

# Authentication - External Configuration
include "auth.conf"

# Performance Optimizations
max_connections: 2000
max_control_line: 8KB
max_payload: 8MB
max_pending: 128MB
ping_interval: "2m"
ping_max: 2
write_deadline: "5s"

# Logging (optimized)
logtime: true
debug: false
trace: false
log_file: "/var/log/nats/nats.log"
log_size_limit: 100MB
max_traced_msg_len: 1024

# JetStream Configuration (optimized)
jetstream {
    store_dir: "/data"
    
    # Optimized memory limits
    max_memory_store: 2GB
    max_file_store: 20GB
    
    # Performance tuning
    sync_interval: "2m"
    
    # Domain for multi-cluster
    domain: "brandmate"
    
    # Cipher for encryption
    cipher: "chacha"
}

# Clustering Configuration (for high availability)
# cluster {
#     name: "brandmate-cluster"
#     host: "0.0.0.0"
#     port: 6222
    
#     # For multiple NATS nodes (uncomment when scaling)
#     # routes = [
#     #     nats://nats-1:6222
#     #     nats://nats-2:6222
#     #     nats://nats-3:6222
#     # ]
# }

# TLS Configuration (for production)
# tls {
#     cert_file: "/etc/ssl/certs/nats.crt"
#     key_file: "/etc/ssl/private/nats.key"
#     ca_file: "/etc/ssl/certs/ca.crt"
#     verify: true
# }
